(this["webpackJsonptotsystems-test-task"]=this["webpackJsonptotsystems-test-task"]||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(18),c=a.n(r),o=(a(25),a(4)),l=(a(26),a(6)),i=a(7),u=a(8),m=a(9),g=a(10);a(27);function d(e){var t=Object(s.useState)(e.pages),a=Object(o.a)(t,1)[0],r=Object(s.useState)(e.selectedPage),c=Object(o.a)(r,2),l=c[0],i=c[1],u=Object(s.useState)(""),m=Object(o.a)(u,2),g=m[0],d=m[1];l!==g&&(i(e.selectedPage),d(e.selectedPage));var y=[];return a.forEach((function(t){return y.push(n.a.createElement("div",{key:t.key,className:"md-selector-title",style:{color:l===t.key?"gray":"#e5e5e5"},onClick:function(){i(t.key),e.selectAction(t.key)}},t.title))})),n.a.createElement("div",{className:"mb-selector-wrapper"},n.a.createElement("div",{className:"mb-selector"},y))}var y=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={source:e.source,selectedPage:e.source.pages[0].key,openAction:e.openAction},s}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.source,s=t.selectedPage,r=t.openAction,c=a.pages.filter((function(e){return e.key===s}))[0],o=[];return c.lastMessages.forEach((function(e){return o.push(n.a.createElement("div",{key:e.key,onClick:function(){return r(e.chatKey)},className:"mb-message"},n.a.createElement("div",{style:{color:"#4f76a6"}},e.chatName),n.a.createElement("div",null,n.a.createElement("span",null,e.user.login,": "),n.a.createElement("span",null," ",e.message))))})),n.a.createElement("div",{className:"mb-wrapper"},n.a.createElement(d,{selectedPage:s,selectAction:function(t){return e.setState({selectedPage:t})},pages:a.pages}),n.a.createElement("div",{className:"mb-messages"},o))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(l.a)({},e)}}]),a}(s.Component),p=(a(28),{key:"user_1",login:"frontender",role:""}),f={key:"user_0",login:"alex1993",role:""};function h(e){return n.a.createElement("div",{className:"chat-title-block"},e.title.toUpperCase())}function k(e){var t=[];return e.messages.forEach((function(a){return t.push(n.a.createElement("div",{key:a.key,style:{justifyContent:a.user.key===p.key?"flex-end":"flex-start"},className:"chat-message-block"},n.a.createElement("div",{style:{width:"auto"},className:"chat-message"},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.user.login,a.user.key===p.key&&n.a.createElement("span",{onClick:function(){return e.deleteAction(a)},className:"message-delete-button"},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c")),n.a.createElement("div",null,a.message))))})),n.a.createElement("div",{className:"chat-flow-messages-wrapper"},t)}function v(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1];return n.a.createElement("div",{className:"cf-text-box"},n.a.createElement("input",{onChange:function(e){return c(e.target.value)},className:"input-text-box",placeholder:"Write your message...",type:"text",value:r}),n.a.createElement("div",{className:"input-send-button-block"},n.a.createElement("input",{disabled:0===r.length,onClick:function(){c(""),e.sendAction(r)},className:"input-send-button",type:"button",value:"\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})))}var b,E=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).sendMessageAction=function(e){var t=s.state,a=t.source,n=t.userInfo,r=t.sendAction,c={key:"message_".concat(100*Math.random()),user:n,message:e,chatKey:a.key,chatName:a.title};s.setState({lastMessage:c}),r(c)},s.state=Object(l.a)({},{textMessage:"",lastMessage:void 0},{},e),s}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.source,a=e.bgColor,s=e.deleteAction;return void 0===t?n.a.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",color:"gray",fontSize:"16pt"}},"select a chat..."):n.a.createElement("div",{style:{background:a},className:"chat-flow-wrapper"},n.a.createElement(h,{title:t.title}),n.a.createElement(k,{deleteAction:s,messages:t.messages}),n.a.createElement(v,{sendAction:this.sendMessageAction}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Object(l.a)({},e)}}]),a}(s.Component);!function(e){e.GROUP="group",e.PERSONAL="personal"}(b||(b={}));var O=b,N=[{key:"required_work_chat",type:O.GROUP,title:"General Work Chat",members:[p,f],messages:[{key:"message_12",user:f,message:"Hello!",chatKey:"required_work_chat",chatName:"General Work Chat"},{key:"message_12441",user:f,message:"How is your task?",chatKey:"required_work_chat",chatName:"General Work Chat"}]},{key:"flood_chat",type:O.GROUP,title:"Flood Chat:)",members:[p,f],messages:[{key:"message_12515",user:f,message:"Hi!",chatKey:"flood_chat",chatName:"Flood Chat:)"},{key:"message_16626",user:f,message:"How do you do?",chatKey:"flood_chat",chatName:"Flood Chat:)"}]},{key:"".concat(f.key,"_").concat(p.key),type:O.PERSONAL,title:f.login,members:[],messages:[{key:"message_1268900",user:f,message:"Whats up?",chatName:f.login,chatKey:"".concat(f.key,"_").concat(p.key)}]}],j=a(1);var w=function(){var e=Object(s.useState)(N),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(s.useState)(""),l=Object(o.a)(c,2),i=l[0],u=l[1],m=Object(s.useState)(0),g=Object(o.a)(m,2),d=g[0],f=g[1];Object(s.useEffect)((function(){void 0!==localStorage.chatsData&&r(JSON.parse(localStorage.chatsData))}),[]);var h=Object(j.f)(),k=a.filter((function(e){return e.key===i}))[0],v=[],b=[];a.filter((function(e){return e.type===O.PERSONAL})).forEach((function(e){return v.push(e.messages[e.messages.length-1])})),a.filter((function(e){return e.type===O.GROUP})).forEach((function(e){return b.push(e.messages[e.messages.length-1])}));var w={pages:[{key:"selector_chats_groups",title:"groups",lastMessages:b},{key:"selector_chats_personal",title:"personal",lastMessages:v}]};return n.a.createElement(j.c,null,n.a.createElement(j.a,{path:"/board"},n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"required-chat-wrapper"},n.a.createElement(E,{deleteAction:function(e){var t=a;t.map((function(t){return t.key===e.chatKey?(t.messages=t.messages.filter((function(t){return t.key!==e.key})),t):t})),r(t),f(d+1),localStorage.chatsData=JSON.stringify(t)},sendAction:function(e){var t=a;t.map((function(t){return t.key===e.chatKey?(t.messages.push(e),t):t})),r(t),f(d+1),localStorage.chatsData=JSON.stringify(t)},userInfo:p,source:k,bgColor:"#4f76a6"})),n.a.createElement("div",{className:"app-mb-wrapper"},n.a.createElement(y,{openAction:function(e){u(e)},source:w})))),n.a.createElement(j.a,{path:"/"},n.a.createElement("div",{className:"login-wrapper"},n.a.createElement("div",{className:"login"},n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement("input",{type:"text",value:"frontender"}),n.a.createElement("input",{type:"password",value:"qwerty123"})),n.a.createElement("button",{onClick:function(){return h.push("/board")}},"login")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var S=a(12);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(S.a,null,n.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.0e146923.chunk.js.map